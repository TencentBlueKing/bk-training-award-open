(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{199:function(a,r,t){"use strict";t.r(r);var e=t(386);var o=t(236);for(var p in o)if(p!=="default")(function(a){t.d(r,a,function(){return o[a]})})(p);var l=t(337);var n=t(18);var i=Object(n["a"])(o["default"],e["a"],e["b"],false,null,"61b98ca7",null);r["default"]=i.exports},236:function(a,r,t){"use strict";t.r(r);var e=t(237);var o=t.n(e);for(var p in e)if(p!=="default")(function(a){t.d(r,a,function(){return e[a]})})(p);r["default"]=o.a},237:function(a,r,t){"use strict";var e=t(1);Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var o=e(t(9));var p=e(t(10));var l=t(8);var n=t(208);var i={name:"detail",components:{DetailInfo:function a(){return Promise.all([t.e(0),t.e(24)]).then(t.bind(null,371))},ApplyForm:function a(){return Promise.all([t.e(0),t.e(23)]).then(t.bind(null,373))}},props:{type:{type:String,default:function a(){return null}}},provide:function a(){var r=this;return{awardDetail:function a(){return r.$refs["award-detail"].awardForm||{}}}},data:function a(){return{isShow:false,applyForm:{},panelCutOut:false,pageType:{DETAIL_APPLY:l.DETAIL_APPLY,DETAIL_APPROVAL:l.DETAIL_APPROVAL,DETAIL_EDIT:l.DETAIL_EDIT,DETAIL_APPLY_DETAIL:l.DETAIL_APPLY_DETAIL,DETAIL_DRAFT_DETAIL:l.DETAIL_DRAFT_DETAIL,DETAIL_APPROVAL_RESULT_DETAIL:l.DETAIL_APPROVAL_RESULT_DETAIL},approvalForm:{approvalVisible:false,approvalLoading:false,approvalText:"",approvalTips:""},approvalFormRules:Object.freeze({approvalText:[{required:true,message:"请填写评语",trigger:"blur"}]}),approvalTabItems:[{"tab-name":"审批列表","tab-key":"approval-list"}],approvalType:{pass:1,not_pass:0},pendingApprovalRemoteData:[]}},computed:{formType:function a(r){return r.$route.query[l.DETAIL_TYPE_KEYNAME]||l.DETAIL_APPLY}},created:function a(){this.handleInit()},methods:{handleInit:function a(){},toApproval:function a(r,t){this.approvalForm.approvalTips=r;this.approvalForm.approvalVisible=true;this.approvalForm.action=t},handlePostApproval:function a(r){var t=this;var e=r.approvalTips,l=r.approvalText,i=r.action;return(0,p.default)(o.default.mark(function a(){return o.default.wrap(function a(r){while(1){switch(r.prev=r.next){case 0:r.next=2;return t.$refs["approval-form"].validate();case 2:t.approvalForm.approvalLoading=true;return r.abrupt("return",(0,n.postApproval)({action:i,id:t.$route.query["record_id"],approval_text:l}).then(function(a){t.messageSuccess(e);t.approvalForm.approvalVisible=false;t.approvalForm.approvalLoading=false;t.$router.back()}));case 4:case"end":return r.stop()}}},a)}))()}}};r.default=i},238:function(a,r,t){},337:function(a,r,t){"use strict";var e=t(238);var o=t.n(e);var p=o.a},386:function(a,r,t){"use strict";var e=function(){var a=this;var r=a.$createElement;var t=a._self._c||r;return t("div",{staticClass:"detail-container"},[t("top-back"),a._v(" "),t("div",{staticClass:"board"},[t("div",[t("bk-divider",{staticStyle:{width:"100%"}})],1),a._v(" "),t("div",{staticClass:"form-panel"},[t("DetailInfo",{ref:"award-detail",staticClass:"detail",attrs:{type:"award_detail"}}),a._v(" "),t("ApplyForm",{ref:"apply-form",staticClass:"form"})],1)]),a._v(" "),a.formType===a.pageType["DETAIL_APPROVAL"]?t("div",{staticClass:"tc w100  mt15"},[t("div",{staticClass:"button-item"},[t("bk-button",{staticClass:"mr20 ml20",attrs:{theme:"danger","ext-cls":"button-item"},on:{click:function(r){a.toApproval("拒绝"+a.$refs["apply-form"].applyForm.application_users+"的申请",a.approvalType["not_pass"])}}},[t("bk-icon",{attrs:{type:"close-circle"}}),a._v(" "),t("span",[a._v("不通过")])],1),a._v(" "),t("bk-button",{staticClass:"mr20 ml20",attrs:{theme:"success","ext-cls":"button-item"},on:{click:function(r){a.toApproval("通过"+a.$refs["apply-form"].applyForm.application_users+"的申请",a.approvalType["pass"])}}},[t("span",[a._v("通过")]),a._v(" "),t("bk-icon",{attrs:{type:"check-circle"}})],1)],1)]):a._e(),a._v(" "),t("bk-dialog",{attrs:{"header-position":"left",loading:a.approvalForm.approvalLoading,title:a.approvalForm.approvalTips},on:{confirm:function(r){a.handlePostApproval(a.approvalForm)}},model:{value:a.approvalForm.approvalVisible,callback:function(r){a.$set(a.approvalForm,"approvalVisible",r)},expression:"approvalForm.approvalVisible"}},[t("bk-form",{ref:"approval-form",attrs:{rules:a.approvalFormRules,model:a.approvalForm}},[t("bk-form-item",{attrs:{property:"approvalText",required:true,"label-width":80,label:"评语"}},[t("bk-input",{attrs:{placeholder:"请输入不超过255字的评语",type:"textarea",rows:3,maxlength:255},model:{value:a.approvalForm.approvalText,callback:function(r){a.$set(a.approvalForm,"approvalText",r)},expression:"approvalForm.approvalText"}})],1)],1)],1)],1)};var o=[];t.d(r,"a",function(){return e});t.d(r,"b",function(){return o})}}]);